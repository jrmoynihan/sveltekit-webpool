import{C as a,aa as s,ab as e,ac as t,ad as r,a8 as n,ae as o,af as i,ag as c,ah as u,ai as f,aj as d}from"./vendor-710b89fd.js";import{f as l}from"./firebaseInit-e8501708.js";import{a as m}from"./store-9ec055ab.js";import{r as w}from"./singletons-12a22614.js";import{h as y}from"./functions-be98bf29.js";const p=async function(a,s){return w.goto(a,s,[])};const b=a(l.currentUser),h=a();let g;const j=async a=>{try{return await u(l,a)}catch(s){alert(s)}},U=async a=>{try{return await f(l,a)}catch(s){alert(s)}},k=async(a,o,u)=>{const f=await(async a=>{let s;switch(a){case"Google":s=new i;break;case"Facebook":s=new c;break;default:s=new i}return s})(a);l.currentUser&&(o?await s(l.currentUser,f):await e(l.currentUser,f));const d=await(async(a,s)=>s?await j(a):await U(a))(f,o);if(d){b.set(d.user);const a=t(b);g=await r(n(m,a.uid)),g.exists()?console.info("User "+(g.exists()?"already exists":"does not exist!")):x()}u&&y(u)},x=async()=>{const a=t(b),s=n(m,a.uid);await o(s,{name:a.displayName,email:a.email,admin:!1,college:!1,pick6:!1,playoffs:!1,survivor:!1,weekly:!1}),console.info(`New user doc for ${a.displayName} (${a.uid}) added!`)},v=async()=>{h.set(void 0),d(l),p("/")};l.onAuthStateChanged((()=>{b.set(l.currentUser)}));export{v as a,b as c,k as s,h as u};
