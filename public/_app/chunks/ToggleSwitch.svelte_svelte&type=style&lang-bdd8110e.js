import{C as a,af as s,ag as e,ah as t,ai as r,ac as n,aj as o,ak as c,al as i,am as d,an as l,ao as u}from"./vendor-bd6d5c90.js";import{f as m,a as f}from"./store-b6b9cd95.js";import{h as w}from"./functions-be98bf29.js";import{r as y}from"./singletons-12a22614.js";const p=async function(a,s){return y.goto(a,s,[])};const b=a(m.currentUser),h=a();let k;const g=async a=>{try{return await d(m,a)}catch(s){alert(s)}},U=async a=>{try{return await l(m,a)}catch(s){alert(s)}},j=async(a,o,d)=>{const l=await(async a=>{let s;switch(a){case"Google":s=new c;break;case"Facebook":s=new i;break;default:s=new c}return s})(a);m.currentUser&&(o?await s(m.currentUser,l):await e(m.currentUser,l));const u=await(async(a,s)=>s?await g(a):await U(a))(l,o);if(u){b.set(u.user);const a=t(b);k=await r(n(f,a.uid)),k.exists()?console.info("User "+(k.exists()?"already exists":"does not exist!")):x()}d&&w(d)},x=async()=>{const a=t(b),s=n(f,a.uid);await o(s,{name:a.displayName,nickname:a.displayName,email:a.email,admin:!1,college:!1,pick6:!1,playoffs:!1,survivor:!1,weekly:!1}),console.info(`New user doc for ${a.displayName} (${a.uid}) added!`)},v=async()=>{h.set(void 0),u(m),p("/")};m.onAuthStateChanged((()=>{b.set(m.currentUser)}));export{v as a,b as c,j as s,h as u};
